MADI App MVP

Функционал MVP (сервер + статические страницы):
- Авторизация (регистрация/вход по email+пароль, JWT)
- Групповые чаты, роли: owner, moderator, member
- Сообщения: текст, файлы, видео (до 100 МБ)
- Конференции: ссылка/встраивание Jitsi на чат
- Задания: создание в чате (owner/mod), выдача, сдача файла
- Расписание: простое добавление/фильтрация записей

Быстрый старт
1) Требуется Node.js 18+.
2) Установить зависимости и запустить сервер:

   cd server
   cp .env.example .env   # при желании поменять PORT/JWT_SECRET
   npm install
   npm run dev            # или npm start

3) Открыть: http://localhost:3000/

Современный фронтенд (React, Vite)
- В отдельной вкладке терминала:

   cd web
   npm install
   npm run build   # собрать SPA в web/dist

- После сборки сервер отдаёт SPA по пути: http://localhost:3000/app
- Для локальной разработки фронта можно использовать `npm run dev` (Vite проксирует /api и /socket.io на сервер).

Запуск через Docker (без установки Node)
1) Требуется Docker + Docker Compose.
2) В корне репозитория:

   docker compose up --build

3) Открыть: http://localhost:3000/

Демо-данные
- Выполнить один раз:

   cd server && npm run seed

- Пользователи: alice@madi.ru / password, bob@madi.ru / password. Появится чат «Демо группа».

Пути и страницы
- / — вход/регистрация
- /forgot.html — запрос ссылки для восстановления пароля
- /reset.html?token=... — страница сброса пароля по ссылке из письма
- /profile.html — профиль и смена пароля
- /assignments.html — создание заданий по chatId и отправка решений
- /schedule.html — добавление и просмотр расписания
- /teams.html — минималистичный интерфейс в стиле Teams (левый сайдбар, список чатов, основная область чата, панель заданий)

Примечания
- Файлы сохраняются локально в server/uploads (MVP). В проде стоит выдавать через подписанные ссылки и антивирус.
- База — SQLite (server/data/madi.db). Создаётся автоматически при первом запуске.
- Доступы на уровне чата: owner и moderator могут добавлять участников и менять их роль.
- Добавление участников: есть поиск пользователей по email/имени (/api/users) на странице чата.

Email для восстановления пароля
- Настройте SMTP в `server/.env` (APP_BASE_URL — базовый адрес приложения):
  - SMTP_HOST, SMTP_PORT, SMTP_USER, SMTP_PASS, SMTP_FROM, APP_BASE_URL
- Если SMTP не задан, письма сохраняются в `server/data/outbox/*.txt`.
